<head>
<title>Distrochess</title>
<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet"/> 
</head>

<body>
	{{> main}}
</body>

<template name="main">
	{{#if isOverlay}}
		<div id="overlay"></div>
	{{/if}}
	{{#if isSpinner}}
		<div id="spinner">
			<img src="/img/spinner.svg">
		</div>
		<div id="overlay"></div>
	{{/if}}
	{{#if message}}
		<div id="message" class="dialog">
			<div id="message-text">
				{{message}}
			</div>
			<div id="message-ok-button" class="button">
				{{_ "ok"}}
			</div>
		</div>
		<div id="overlay"></div>
	{{/if}}
	{{#if isNeedToSignIn }}
		<div id="need-to-sign-in" class="dialog">
			<div id="need-to-sign-text">
				{{_ "need_to_sign_in"}}
			</div>
			<div id="need-to-sign-in-button" class="button">{{_ "sign_in"}}</div>
			<div id="need-to-sign-in-cancel-button" class="button">{{_ "cancel"}}</div>
		</div>
	{{/if}}

	<div id="header">
		<div id="header-left">
			<img id="header-logo" src="/img/logo.jpg"/>
			<div id="header-text">
				<div id="header-title">Distrochess</div>
				<div id="header-description">{{_ "header_discription"}}</div>
			</div>
		</div>
		<div id="header-right">
			{{> loginButtons}}
		</div>
	</div>
	<div id="content">
		{{#if isWaiting}}
			<div id="waiting">
				{{_ "wait_for_opponent_to_move"}}
			</div>
		{{/if}}
		<div id="board-container">
			<div id="chess-board" class="chess-board {{#if isWaiting}}hidden{{/if}}"></div>
			{{#if isClock}}
				<div id="clock">
					{{formatTime clockTime}}
				</div>
			{{/if}}
			{{#if gameId}}
				<div id="game-id">{{_ "game_id"}} : <strong>{{gameId}}</strong></div>
			{{/if}}
		</div>
		{{#if isPlayers}}
			<div id="players">
				<div class="team-header">
					<img src="/img/chesspieces/wikipedia/wN.png"/>
					{{_ "white_team"}}
				</div>
				<div class="players-table-container">
					<table>
						<tr>
							<th>{{_ "username"}}</th>
							<th>{{_ "moves_ratio"}}</th>
							<th>{{_ "last_move_time"}}</th>
							<th>{{_ "rating"}}</th>
						</tr>
						{{#each players true}}
							<tr class="data-row">
								<td>{{username}}</td>
								<td>{{movesRatio}}</td>
								<td>{{formatDateTime lastMoveTime}}</td>
								<td>{{rating}}</td>
							</tr>
						{{/each}}
					</table>
				</div>
				<div class="team-header">
					<img src="/img/chesspieces/wikipedia/bN.png"/>
					{{_ "black_team"}}
				</div>
				<div class="players-table-container">
					<table>
						<tr>
							<th>{{_ "username"}}</th>
							<th>{{_ "moves_ratio"}}</th>
							<th>{{_ "last_move_time"}}</th>
							<th>{{_ "rating"}}</th>
						</tr>
						{{#each players false}}
							<tr class="data-row">
								<td>{{username}}</td>
								<td>{{movesRatio}}</td>
								<td>{{formatDateTime lastMoveTime}}</td>
								<td>{{rating}}</td>
							</tr>
						{{/each}}
					</table>
				</div>
			</div>
		{{/if}}
		
		{{#if isPromotion}}
			<div id="promotion-dialog" class="dialog">
				<div>{{_ "promote_to"}}</div>
				<div>
					{{> promotionPiece piece="Q"}}
					{{> promotionPiece piece="R"}}
					{{> promotionPiece piece="N"}}
					{{> promotionPiece piece="B"}}
				</div>
			</div>
		{{/if}}
	</div>
</template>

<template name="promotionPiece">
	<img src="img/chesspieces/wikipedia/{{playingColor}}{{piece}}.png"><br/>
</template>

