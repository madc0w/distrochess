<template name="chessBoard">
	{{#if isWaiting}}
		<div id="waiting">
			 {{{_ "wait_for_opponent_to_move"}}}
		</div>
	{{/if}}
	<div id="board-container">
		{{#unless isWaiting}}
			<div id="chess-board-header">{{_ "its_your_move"}}</div>
		{{/unless}}
		<div id="chess-board" class="chess-board {{#if isWaiting}}hidden{{/if}}"></div>
		{{#unless isWaiting}}
			{{#if isClock}}
				<div id="clock" class="{{lowTimeClass}}">
					{{formatTime clockTime}}
				</div>
			{{/if}}
			{{#if game.id}}
				<div id="game-info">
					<div id="playing-side">
						<div id="playing-side-label">
							{{_ "you_are_playing"}} : 
						</div>
						<img src="/img/chesspieces/wikipedia/{{#if isWhite}}w{{else}}b{{/if}}N.png"/>
					</div>
					<div id="in-check">
						{{#if isInCheck}}{{_ "check"}}{{/if}}
					</div>
				</div>
				<hr/>
				<div id="game-controls">
					<div id="game-id">
						{{_ "game_id"}} : <strong>{{game.id}}</strong>
					</div>
					<div id="pass-or-ignore-button" class="button">{{_ "pass"}}</div>
				</div>
				<div id="history-button" class="button">{{_ "history"}}</div>
			{{/if}}
		{{/unless}}
	</div>
	{{#if isPlayers}}
		<div id="players">
			{{> players game=game isWhite=(not isWhite)}}
			{{> players game=game isWhite=isWhite}}
		</div>
	{{/if}}
	{{#if game}}
		<div id="game-comments-container">
			<div id="game-comments-header">{{_ "comments_on_this_game"}}</div>
			<div id="game-comments">
				{{#if isLoadingComments}}
					<img id="comments-spinner" src="/img/spinner.svg">
				{{else if comments.count}}
					{{#each comments}}
						<div class="game-comment">
							<div class="comment-metadata">
								<div class="comment-username">
									{{commentUsername this}}
								</div> &mdash; 
								<div class="comment-date">
									{{formatDateTime date}}
								</div>,
								<div class="comment-move-num">
									{{_ "move"}} {{moveNum}}
								</div> 
							</div>
							<div class="comment-text">{{text}}</div>
						</div>
					{{/each}}
				{{else}}
					<div id="no-comments-message">
						{{_ "be_the_first_to_comment"}}
					</div>
				{{/if}}
			</div>
			<div id="comment-input">
				<input id="game-comment" maxlength="{{maxCommentLength}}"/> 
				<div id="submit-comment-button" class="button">{{_ "send"}}</div>
			</div>
		</div>
	{{/if}}
	
	{{#if isPassDialog}}
		<div id="pass-dialog" class="dialog">
			<div>{{_ "pass_once_or_ignore_permanently"}}</div>
			<div id="pass-button" class="button">{{_ "pass"}}</div>
			<div id="ignore-button" class="button">{{_ "ignore"}}</div>
			{{> cancelButton id="pass-cancel-button" callback=passCancel}}
		</div>
	{{/if}}
	
	{{#if isPromotion}}
		<div id="promotion-dialog" class="dialog">
			<div>{{_ "promote_to"}}</div>
			<div>
				{{> promotionPiece piece="Q"}}
				{{> promotionPiece piece="R"}}
				{{> promotionPiece piece="N"}}
				{{> promotionPiece piece="B"}}
			</div>
		</div>
	{{/if}}
	
	{{#if isNeedToSignIn}}
		<div id="need-to-sign-in" class="dialog">
			<div id="need-to-sign-text">
				{{_ "need_to_sign_in"}}
			</div>
			<div id="need-to-sign-in-button" class="button">{{_ "sign_in"}}</div>
			{{> cancelButton id="need-to-sign-in-cancel-button" callback=needToSignInCancel}}
		</div>
	{{/if}}
	
</template>

<template name="promotionPiece">
	<img src="img/chesspieces/wikipedia/{{playingColor}}{{piece}}.png"><br/>
</template>

